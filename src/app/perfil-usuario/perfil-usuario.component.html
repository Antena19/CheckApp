<!-- BARRA DE NAVEGACION -->
<ion-header>
  <ion-toolbar color="custom-dark">
    <ion-title>
      <div class="header-content">
        <ion-img src="assets/img/logo-check-app.png" class="header-logo"></ion-img>
        <span class="header-title">CheckApp</span>
      </div>
    </ion-title>
    <ion-buttons slot="end">
      <ion-menu-button autoHide="false" menu="main-menu" style="--color: white;">
        <ion-icon name="menu-outline" slot="icon-only" class="white-icon"></ion-icon>
      </ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- MENÚ -->
<ion-menu side="end" menuId="main-menu" contentId="main-content">
  <ion-header>
    <ion-toolbar color="custom-dark">
      <ion-title class="white-text">MENÚ</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content>
    <ion-list>
      <ion-item button (click)="navigateToHome()" lines="none">
        <ion-icon slot="start" name="home-outline" class="white-icon"></ion-icon>
        <ion-label class="white-text">INICIO</ion-label>
      </ion-item>
      <ion-item button (click)="navigateToGestionDeEventos()" lines="none">
        <ion-icon slot="start" name="calendar-outline" class="white-icon"></ion-icon>
        <ion-label class="white-text">GESTIÓN DE EVENTOS</ion-label>
      </ion-item>
      <ion-item button (click)="navigateToInformes()" lines="none">
        <ion-icon slot="start" name="document-text-outline" class="white-icon"></ion-icon>
        <ion-label class="white-text">GENERAR INFORMES</ion-label>
      </ion-item>
      <ion-item button (click)="navigateToMiPerfil()" lines="none">
        <ion-icon slot="start" name="person-outline" class="white-icon"></ion-icon>
        <ion-label class="white-text">MI PERFIL</ion-label>
      </ion-item>
      <ion-item button (click)="logout()" lines="none">
        <ion-icon slot="start" name="log-out-outline" class="white-icon"></ion-icon>
        <ion-label class="white-text">LOG OUT</ion-label>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-menu>

<ion-content id="main-content" class="ion-padding" id="main-content">
  <h1 class="main-title">MI PERFIL</h1>
  <p class="subtitle">Información Personal</p>

  <ion-card class="registro-card">
    <ion-card-content>
      <form #perfilForm="ngForm" (ngSubmit)="guardarCambios()">

        <!-- FOTO DE PERFIL -->
        <div class="profile-image-container">
          <ion-avatar (click)="cambiarFotoPerfil()">
            <ion-img [src]="perfilData.fotoPerfil"></ion-img>
          </ion-avatar>
          <ion-button fill="clear" size="small" (click)="cambiarFotoPerfil()">
            <ion-icon name="camera" slot="start"></ion-icon>
            Cambiar foto
          </ion-button>
        </div>

        <!-- NOMBRE DE USUARIO -->
        <ion-label>Nombre de Usuario</ion-label>
        <ion-item>
          <ion-input
            [value]="perfilData.username"
            readonly>
          </ion-input>
        </ion-item>

        <!-- NOMBRE Y APELLIDO -->
        <ion-label>Nombre y Apellido</ion-label>
        <ion-item>
          <ion-input
            [(ngModel)]="perfilData.nombreApellido"
            required
            name="nombreApellido"
            autocomplete="off">
          </ion-input>
        </ion-item>

        <!-- Nº DE IDENTIFICACIÓN (RUT) -->
        <ion-label>Nº de Identificación (RUT)</ion-label>
        <ion-item>
          <ion-input
            [value]="perfilData.rut"
            readonly>
          </ion-input>
        </ion-item>

        <!-- TELÉFONO -->
        <ion-label>Teléfono/Celular</ion-label>
        <ion-item>
          <ion-input
            [(ngModel)]="perfilData.telefono"
            required
            placeholder="Ejemplo: +56912345678"
            pattern="^\+56[0-9]{9}$"
            name="telefono"
            autocomplete="off">
          </ion-input>
        </ion-item>

        <!-- EMAIL -->
        <ion-label>Email</ion-label>
        <ion-item>
          <ion-input
            [(ngModel)]="perfilData.email"
            type="email"
            required
            name="email"
            autocomplete="off">
          </ion-input>
        </ion-item>

        <!-- BOTÓN GUARDAR CAMBIOS -->
        <ion-button expand="block" type="submit" class="custom-registro-button">
          Guardar Cambios
        </ion-button>
        
        
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>
